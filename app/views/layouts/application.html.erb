<!DOCTYPE html>
<html>
  <head>
    <title>Inventory</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag 'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_pack_tag 'application', 'data-turbolinks-track': 'reload' %>
  </head>

  <body>
    <div class="flex body">
      <% if logged_in? %>
      <aside>
        <nav class="nav-aside">
          <ul>
            <li>
              <div class="flex profile-a">
                <a href=<%= edit_user_path(current_user.id) %>>
                  <%= avatar_attached %>
                </a>
                <%= link_to current_user.username.capitalize , edit_user_path(current_user.id), class: 'username' %>
              </div>
              <%= link_to 'Logout', logout_path, class: 'logout-btn' %>
            </li>
            <ul class="main-nav">
              <li>
                <div>
                  <%= icon('fas', 'shopping-cart') %> <%= link_to 'Cart', cart_path(@current_cart), class: 'cart' %>
                </div>
              </li>
              <li>
                <%= icon('fas', 'piggy-bank') %> <%= link_to 'Sales', sales_path %>
              </li>
              <li>
                <%= icon('fas', 'layer-group') %> <%= link_to 'Sale Groups', sale_groups_path %>
              </li>
              <li>
                <%= icon('fas', 'cubes') %> <%= link_to 'Products', products_path %>
              </li>
              <li>
                <%= icon('fas', 'layer-group') %> <%= link_to 'Groups', groups_path %>
              </li>
              <li>
                <%= icon('fas', 'users') %> <%= only_admins %>
              </li>
            </ul>
          </ul>
        </nav>
      </aside>
      <% end %>
      <main class=<%= 'logout' if !logged_in?%>>
        <% if !logged_in? %>
          <header class="header">
            <nav class="navbar">
              <div class="nav-logout">
                <%= link_to 'Login', login_path, class: 'profile' %>
                <%= link_to 'Register', new_user_path %>
              </div>
            </nav>
          </header>
        <% end %>
        <div class="yield">
          <%= yield %>
        </div>
      </main>
    </div>
    <% unless flash.empty? %>
      <script type="text/javascript">
        <% flash.each do |t, f| %>
          <% type = t.to_s.gsub('alert', 'error').gsub('notice', 'info').gsub('succeeded', 'success') %>
          toastr['<%= type %>']('<%= f %>');
        <% end %>
      </script>
    <% end %>
  </body>
</html>
